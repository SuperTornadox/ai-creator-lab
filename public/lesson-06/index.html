<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 6: AI Animation Studio - AI Creator Lab</title>
  <link rel="stylesheet" href="/shared/styles.css">
  <style>
    /* ===== Section Dividers ===== */
    .lesson-section {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-xl);
      border-bottom: 1px solid var(--color-border);
    }

    .lesson-section:last-child {
      border-bottom: none;
    }

    .section-heading {
      font-size: var(--text-xl);
      font-weight: 650;
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    /* ===== Welcome Banner ===== */
    .welcome-banner {
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      border-radius: var(--radius-lg);
      padding: var(--space-xl) var(--space-xl) var(--space-lg);
      text-align: center;
      margin-bottom: var(--space-xl);
      position: relative;
      overflow: hidden;
      color: #ffffff;
    }

    .welcome-banner::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(2px 2px at 20% 30%, #fff 0%, transparent 100%),
        radial-gradient(2px 2px at 80% 20%, #fff 0%, transparent 100%),
        radial-gradient(1px 1px at 40% 70%, #fff 0%, transparent 100%),
        radial-gradient(1px 1px at 60% 50%, #fff 0%, transparent 100%),
        radial-gradient(2px 2px at 90% 80%, #fff 0%, transparent 100%),
        radial-gradient(1px 1px at 10% 90%, #fff 0%, transparent 100%),
        radial-gradient(1px 1px at 50% 15%, #fff 0%, transparent 100%);
      opacity: 0.4;
      animation: twinkle 3s ease-in-out infinite alternate;
    }

    @keyframes twinkle {
      0% { opacity: 0.3; }
      100% { opacity: 0.6; }
    }

    .welcome-banner h2 {
      position: relative;
      font-size: var(--text-2xl);
      font-weight: 800;
      margin-bottom: var(--space-sm);
      background: linear-gradient(135deg, #ff6ec4, #7873f5, #4adede);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .welcome-banner p {
      position: relative;
      color: rgba(255, 255, 255, 0.8);
      font-size: var(--text-md);
      max-width: 600px;
      margin-inline: auto;
      line-height: 1.6;
    }

    /* ===== Part Divider ===== */
    .part-divider {
      text-align: center;
      padding: var(--space-xl) 0;
      border-top: 3px solid var(--color-secondary);
      border-bottom: 3px solid var(--color-secondary);
      margin: var(--space-xl) 0;
      background: linear-gradient(135deg, var(--color-secondary-light), var(--color-primary-light));
      border-radius: var(--radius-lg);
    }

    .part-divider h2 {
      font-size: var(--text-2xl);
      margin-bottom: var(--space-xs);
    }

    .part-divider p {
      color: var(--color-text-muted);
      font-size: var(--text-md);
    }

    /* ===== Challenge Cards Grid ===== */
    .challenge-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
    }

    .challenge-card {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      padding: var(--space-lg);
      border: 2px solid var(--color-border);
      text-align: center;
      cursor: pointer;
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal),
                  border-color var(--transition-normal);
    }

    .challenge-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-3px);
    }

    .challenge-card.card-selected {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-light);
    }

    .challenge-card .challenge-emoji {
      font-size: 2.5rem;
      margin-bottom: var(--space-sm);
    }

    .challenge-card .challenge-name {
      font-size: var(--text-md);
      font-weight: 650;
      margin-bottom: var(--space-xs);
    }

    .challenge-card .challenge-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.4;
    }

    .challenge-card .difficulty {
      display: inline-block;
      margin-top: var(--space-sm);
      font-size: var(--text-xs);
      font-weight: 700;
      padding: 0.2em 0.6em;
      border-radius: var(--radius-full);
    }

    .difficulty-easy {
      background: var(--color-success-light);
      color: #16a34a;
    }

    .difficulty-medium {
      background: var(--color-warning-light);
      color: #b45309;
    }

    .difficulty-hard {
      background: var(--color-secondary-light);
      color: var(--color-secondary);
    }

    /* ===== Art Style Cards ===== */
    .art-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
    }

    .art-card {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: var(--space-xl) var(--space-lg);
      border: 2px solid var(--color-border);
      text-align: center;
      cursor: pointer;
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal),
                  border-color var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .art-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent 50%, rgba(124, 58, 237, 0.04) 100%);
      pointer-events: none;
    }

    .art-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-4px);
    }

    .art-card.card-selected {
      border-color: var(--color-secondary);
      box-shadow: 0 0 0 3px var(--color-secondary-light);
    }

    .art-card .art-emoji {
      font-size: 3rem;
      margin-bottom: var(--space-sm);
      display: block;
    }

    .art-card .art-name {
      font-size: var(--text-lg);
      font-weight: 700;
      margin-bottom: var(--space-xs);
    }

    .art-card .art-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* ===== Upgrade Tips Grid ===== */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: var(--space-md);
    }

    .tip-card {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
      padding: var(--space-md) var(--space-lg);
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal);
      cursor: pointer;
    }

    .tip-card:hover {
      box-shadow: var(--shadow-sm);
      transform: translateY(-2px);
    }

    .tip-card .tip-emoji {
      font-size: 1.8rem;
      margin-bottom: var(--space-xs);
    }

    .tip-card .tip-title {
      font-size: var(--text-md);
      font-weight: 650;
      margin-bottom: var(--space-xs);
    }

    .tip-card .tip-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* ===== Tips Box ===== */
    .tips-box {
      background: var(--color-accent-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-top: var(--space-md);
    }

    .tips-box h4 {
      margin-bottom: var(--space-sm);
      color: var(--color-accent-hover);
    }

    .tips-box ul {
      list-style: none;
      padding: 0;
    }

    .tips-box li {
      padding: var(--space-xs) 0;
      font-size: var(--text-sm);
      line-height: 1.6;
    }

    .tips-box li::before {
      content: "\2728 ";
    }

    /* ===== Concept Box ===== */
    .concept-box {
      background: linear-gradient(135deg, rgba(124, 58, 237, 0.06), rgba(79, 110, 247, 0.06));
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      margin-bottom: var(--space-lg);
      border: 1px solid rgba(124, 58, 237, 0.12);
    }

    .concept-box h3 {
      font-size: var(--text-lg);
      margin-bottom: var(--space-sm);
      color: var(--color-secondary);
    }

    .concept-box p {
      font-size: var(--text-md);
      line-height: 1.6;
      color: var(--color-text-muted);
    }

    /* ===== Playground containers ===== */
    .playground-wrapper {
      min-height: 500px;
    }

    .playground-wrapper .flex {
      flex-wrap: wrap;
    }

    /* ===== Export section ===== */
    .export-section {
      background: var(--color-success-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .export-section .export-info {
      flex: 1;
      min-width: 200px;
    }

    .export-section .export-info h3 {
      margin-bottom: var(--space-xs);
    }

    .export-section .export-info p {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    /* ===== Motion words highlight ===== */
    .motion-word {
      display: inline-block;
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
      padding: 0.15em 0.5em;
      border-radius: var(--radius-sm);
      font-weight: 600;
      font-size: var(--text-sm);
      margin: 2px;
    }

    /* ===== Responsive ===== */
    @media (max-width: 767px) {
      .playground-wrapper .flex {
        flex-direction: column;
      }

      .challenge-grid {
        grid-template-columns: 1fr 1fr;
      }

      .art-grid {
        grid-template-columns: 1fr;
      }

      .tips-grid {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- Lesson Header -->
  <header class="lesson-header">
    <div class="lesson-badge">
      <span class="lesson-number">06</span>
      <span class="lesson-title">AI Animation Studio</span>
    </div>
    <a href="/" class="back-link">&larr; Back to all lessons</a>
  </header>

  <!-- Page Layout -->
  <div class="lesson-page">

    <!-- Main Content Area -->
    <main class="lesson-main" id="main-content">

      <!-- ===== Welcome Banner ===== -->
      <div class="welcome-banner">
        <h2>&#x1F3AC; Turn Code into Moving Art!</h2>
        <p>
          Today you become an animator. Describe what you imagine, and AI will write the code to bring it to life. No coding experience needed &mdash; just your creativity!
        </p>
      </div>

      <!-- ===== PART 1: Animation Playground ===== -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F3AF; Part 1: Animation Playground</h2>
        <p class="mb-md" style="color: var(--color-text-muted); font-size: var(--text-sm);">
          Click any animation challenge below to load its description into the playground. Start with Easy and work your way up!
        </p>

        <div class="challenge-grid" id="animation-grid">
          <!-- Rendered by JS -->
        </div>
      </div>

      <!-- Code Playground Part 1 -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F3A8; Animation Playground</h2>
        <div class="playground-wrapper" id="playground-part1"></div>

        <div class="tips-box">
          <h4>&#x1F4A1; Animation Descriptions Need MOTION Words!</h4>
          <ul>
            <li>Use words like: <span class="motion-word">float</span> <span class="motion-word">bounce</span> <span class="motion-word">spin</span> <span class="motion-word">fade</span> <span class="motion-word">grow</span> <span class="motion-word">shrink</span> <span class="motion-word">pulse</span> <span class="motion-word">orbit</span></li>
            <li>Describe the MOVEMENT: "particles spray upward then fall back down with gravity"</li>
            <li>Specify COLORS: "rainbow gradient" or "neon green on black background"</li>
            <li>Mention SPEED: "slowly rotating" vs "rapidly spinning"</li>
            <li>Add INTERACTION: "when I click" or "follows the mouse"</li>
          </ul>
        </div>
      </div>

      <!-- ===== PART 2 DIVIDER ===== -->
      <div class="part-divider">
        <h2>&#x1F3A8; Part 2: Generative Art Gallery</h2>
        <p>Art made by rules + randomness = unique every time!</p>
      </div>

      <!-- Generative Art Concept -->
      <div class="lesson-section">
        <div class="concept-box">
          <h3>&#x1F9EA; What is Generative Art?</h3>
          <p>
            Generative art is art created by a set of rules combined with randomness.
            The computer follows the rules you describe, but adds unpredictable elements &mdash;
            so every time you run it, you get something <strong>unique</strong>.
            Think of it like giving nature a paintbrush: you set the boundaries, but the results always surprise you!
          </p>
        </div>

        <h2 class="section-heading">&#x1F5BC;&#xFE0F; Choose an Art Style</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Click a style card to load its prompt into the playground below.
        </p>
        <div class="art-grid" id="art-grid">
          <!-- Art style cards rendered by JS -->
        </div>
      </div>

      <!-- Code Playground Part 2 -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F3A8; Generative Art Studio</h2>
        <div class="playground-wrapper" id="playground-part2"></div>
      </div>

      <!-- Make It Interactive -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x26A1; Make It Interactive &mdash; Upgrade Ideas</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Already have a working animation or art piece? Click a tip below to copy an upgrade idea into the "What to change?" box.
        </p>
        <div class="tips-grid" id="upgrade-grid">
          <!-- Upgrade tip cards rendered by JS -->
        </div>
      </div>

      <!-- ===== SHARE & EXPORT ===== -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F4E6; Save Your Animations</h2>
        <div class="export-section">
          <div class="export-info">
            <h3>Download your animation as an HTML file</h3>
            <p>Open it in any browser to watch your animation again, or share it with friends and family!</p>
          </div>
          <div id="export-btn"></div>
        </div>
      </div>

    </main>

    <!-- Task Sidebar -->
    <aside class="lesson-sidebar">
      <div class="task-sidebar" id="task-sidebar"></div>
    </aside>

  </div>

  <script src="/shared/components.js"></script>
  <script>
    // =============================================
    // Animation Challenge Data (Part 1)
    // =============================================
    var animationChallenges = [
      {
        emoji: '\uD83C\uDF08',
        name: 'Rainbow Wave',
        desc: 'Colorful bars that wave back and forth',
        difficulty: 'easy',
        prompt: 'Create a full-page animation of colorful vertical bars that wave back and forth like a sine wave. Use rainbow colors (red, orange, yellow, green, blue, indigo, violet) for the bars. Each bar should move up and down smoothly but slightly offset from its neighbor so it creates a flowing wave effect. The bars should fill the whole screen on a dark background. Use canvas or CSS animations. Make it smooth and hypnotic.'
      },
      {
        emoji: '\u26F2',
        name: 'Particle Fountain',
        desc: 'Particles spray upward and fall back down',
        difficulty: 'easy',
        prompt: 'Create a full-page particle fountain animation using HTML canvas. Particles should continuously spray upward from the bottom center of the screen like a water fountain. Each particle should be a small colorful circle (random bright colors). Particles should shoot up with random speeds and angles, then slow down and fall back down due to gravity. Particles should fade out as they fall. Use a dark/black background. Spawn about 5-10 new particles per frame for a constant stream. Make it beautiful and mesmerizing.'
      },
      {
        emoji: '\u2B50',
        name: 'Starfield',
        desc: 'Stars flying toward you (classic screensaver)',
        difficulty: 'medium',
        prompt: 'Create a classic starfield animation using HTML canvas. Stars should start as tiny dots in the center of the screen and fly outward toward the edges, getting bigger and brighter as they get closer (simulating flying through space). Stars should be white dots on a pure black background. Start with about 200 stars. When a star leaves the screen, it should respawn at the center. Stars closer to the edges should move faster than stars near the center to create a 3D depth effect. Make it smooth and feel like you are flying through space at warp speed.'
      },
      {
        emoji: '\uD83E\uDDEA',
        name: 'Lava Lamp',
        desc: 'Smooth blobby shapes floating and merging',
        difficulty: 'medium',
        prompt: 'Create a lava lamp animation using HTML canvas. Draw several large, smooth, blobby circles (metaball-style if possible, or just overlapping semi-transparent circles) that float slowly upward and downward within the screen. Use warm colors like red, orange, magenta, and pink with semi-transparency so blobs blend when they overlap. The blobs should drift slowly and smoothly, bouncing gently off the top and bottom edges. Use a dark purple or deep blue background. Make 6-8 blobs of varying sizes. The movement should feel organic, relaxing, and smooth.'
      },
      {
        emoji: '\uD83D\uDCBB',
        name: 'Matrix Rain',
        desc: 'Falling green characters like The Matrix',
        difficulty: 'hard',
        prompt: 'Create the classic Matrix digital rain effect using HTML canvas. Green characters (use random letters, numbers, and symbols) should fall down the screen in columns. Each column should have characters that appear at the top and cascade downward. The leading character in each column should be bright white/green, and characters behind it should fade to darker green. Characters should randomly change as they fall. Use a black background. Fill the entire screen width with columns. Different columns should fall at different speeds and start at random times. Make it look exactly like the iconic Matrix movie effect.'
      },
      {
        emoji: '\uD83C\uDF86',
        name: 'Fireworks Show',
        desc: 'Click anywhere to launch fireworks!',
        difficulty: 'hard',
        prompt: 'Create an interactive fireworks animation using HTML canvas. When the user clicks anywhere on the screen, a firework rocket should launch from the bottom center upward toward the click position. When the rocket reaches the target, it should explode into many small particles that spread outward in a circle, then fade and fall down with gravity. Each explosion should use a random bright color (red, gold, blue, green, magenta, cyan). Particles should leave a slight trail as they move. Use a dark night-sky background (very dark blue or black). Allow multiple fireworks at the same time. Add a subtle twinkle of stars in the background. Make the explosions feel satisfying and spectacular!'
      }
    ];

    // =============================================
    // Art Style Data (Part 2)
    // =============================================
    var artStyles = [
      {
        emoji: '\uD83C\uDF00',
        name: 'Spiral Patterns',
        desc: 'Colorful spirals that grow from the center, creating hypnotic patterns',
        prompt: 'Create a generative art piece using HTML canvas that draws colorful spirals growing outward from the center of the screen. Use multiple spiral arms (like a galaxy) with different colors from a rainbow palette. Each spiral arm should be made of small circles or dots that get bigger as they move outward. Add slight randomness to the positions so no two runs look exactly the same. The spirals should draw themselves slowly so you can watch them grow. Use a dark background. Make it beautiful and mesmerizing. The drawing should animate - slowly revealing the spiral over about 10 seconds, then start over with new random variations.'
      },
      {
        emoji: '\u25B3',
        name: 'Geometric Tiles',
        desc: 'Repeating shapes that create mesmerizing patterns',
        prompt: 'Create a generative art piece using HTML canvas that fills the screen with a grid of geometric tiles. Each tile should contain a randomly chosen pattern: diagonal lines, circles, triangles, or quarter-circles. Use a limited color palette of 4-5 harmonious colors (like navy, teal, coral, gold, cream). Each tile should be about 60-80 pixels. Add slight randomness so the pattern is different each time. The tiles should draw themselves one by one with a brief delay so you can watch the pattern emerge across the screen. Use clean, crisp lines. Make it look like modern graphic design art.'
      },
      {
        emoji: '\uD83C\uDF33',
        name: 'Nature Simulation',
        desc: 'Simple flocking birds or a growing fractal tree',
        prompt: 'Create a nature simulation using HTML canvas. Draw a tree that grows from the bottom center of the screen using recursive branching. The trunk should start thick and branches should get thinner and shorter as they split. Each branch splits into 2-3 smaller branches at slightly random angles. Add green leaves (small filled circles) at the branch tips. The tree should animate its growth - starting from the trunk and branching outward so you can watch it grow over about 8 seconds. Use brown for the trunk/branches and various greens for leaves. Add a light blue sky background and green ground. Each time the page loads, the tree should look slightly different due to random angles.'
      },
      {
        emoji: '\uD83C\uDFA8',
        name: 'Abstract Painter',
        desc: 'Random brush strokes in complementary colors',
        prompt: 'Create a generative abstract painting using HTML canvas. The canvas should slowly fill with random brush strokes. Each stroke should be a thick, slightly curved line with random length, position, and angle. Use a palette of complementary colors (like deep blue with orange, or purple with gold) with varying opacity. Some strokes should be thin and some thick. Add occasional splatter effects (clusters of small dots). The painting should build up slowly over time, adding one stroke every 200ms, so you can watch it being painted. After about 50 strokes, pause for 3 seconds showing the finished piece, then clear and start a new painting with a different color palette. Use a white or off-white background.'
      }
    ];

    // =============================================
    // Upgrade / Interactive Tips Data
    // =============================================
    var upgradeTips = [
      {
        emoji: '\uD83D\uDDB1\uFE0F',
        title: 'Mouse Follower',
        desc: 'Elements follow the cursor around the screen',
        mod: 'Add mouse interaction: make the main elements follow the mouse cursor position. When the mouse moves, the closest elements should drift toward the cursor smoothly. Add a glowing trail effect behind the cursor.'
      },
      {
        emoji: '\uD83D\uDC46',
        title: 'Click to Create',
        desc: 'Clicking spawns new elements at that position',
        mod: 'Add click interaction: when the user clicks anywhere on the canvas, spawn a burst of new colorful elements at that position. Each click should create 10-20 new particles or shapes that explode outward from the click point, then fade away. Use a random color for each click burst.'
      },
      {
        emoji: '\uD83C\uDFA8',
        title: 'Color Shift on Hover',
        desc: 'Colors change as you move the mouse',
        mod: 'Add a color-shifting effect: the overall color palette should change based on the mouse position. Moving the mouse left-to-right shifts the hue, and moving up-to-down shifts the brightness. This makes the entire animation change colors as the user explores with their mouse.'
      },
      {
        emoji: '\uD83C\uDFB5',
        title: 'Music Visualizer',
        desc: 'Elements bounce and pulse to a simulated beat',
        mod: 'Add a music visualizer effect: create a simulated beat (a repeating pulse every 500ms) that makes the elements react. On each beat, elements should briefly grow larger, flash brighter, or bounce with extra energy. Add a visual "pulse" ring that expands from the center on each beat. You can use setInterval to create the rhythm.'
      },
      {
        emoji: '\uD83C\uDF0D',
        title: 'Gravity Simulation',
        desc: 'Elements attract and orbit each other',
        mod: 'Add gravity physics: make the elements attract each other like planets. Larger elements should have stronger gravity. Smaller elements should orbit around larger ones. When two elements get very close, they should merge into a larger element. Add trails behind moving elements so you can see their orbital paths.'
      },
      {
        emoji: '\u23EF\uFE0F',
        title: 'Speed Controls',
        desc: 'Slow motion and fast forward buttons',
        mod: 'Add speed controls: create three buttons at the top of the screen - "Slow Motion" (0.25x speed), "Normal" (1x speed), and "Fast Forward" (3x speed). Also add a "Pause/Play" button. Style the buttons to look clean and modern with rounded corners. The current speed should be highlighted.'
      }
    ];

    // =============================================
    // Part 1: Animation Challenge Cards
    // =============================================
    var animationGrid = document.getElementById('animation-grid');

    animationChallenges.forEach(function (challenge) {
      var card = document.createElement('div');
      card.className = 'challenge-card';

      var emojiEl = document.createElement('div');
      emojiEl.className = 'challenge-emoji';
      emojiEl.textContent = challenge.emoji;

      var nameEl = document.createElement('div');
      nameEl.className = 'challenge-name';
      nameEl.textContent = challenge.name;

      var descEl = document.createElement('div');
      descEl.className = 'challenge-desc';
      descEl.textContent = challenge.desc;

      var diffLabel = document.createElement('span');
      diffLabel.className = 'difficulty';
      if (challenge.difficulty === 'easy') {
        diffLabel.classList.add('difficulty-easy');
        diffLabel.textContent = 'Easy';
      } else if (challenge.difficulty === 'medium') {
        diffLabel.classList.add('difficulty-medium');
        diffLabel.textContent = 'Medium';
      } else {
        diffLabel.classList.add('difficulty-hard');
        diffLabel.textContent = 'Hard';
      }

      card.appendChild(emojiEl);
      card.appendChild(nameEl);
      card.appendChild(descEl);
      card.appendChild(diffLabel);

      card.addEventListener('click', function () {
        var allCards = animationGrid.querySelectorAll('.challenge-card');
        allCards.forEach(function (c) { c.classList.remove('card-selected'); });
        card.classList.add('card-selected');

        var genTextarea = document.querySelector('#playground-part1 textarea');
        if (genTextarea) {
          genTextarea.value = challenge.prompt;
          genTextarea.focus();
        }

        document.getElementById('playground-part1').scrollIntoView({ behavior: 'smooth', block: 'start' });
      });

      animationGrid.appendChild(card);
    });

    // =============================================
    // Part 1: Code Playground
    // =============================================
    var playgroundPart1Container = document.getElementById('playground-part1');
    var part1GenCount = 0;

    var playgroundPart1 = window.CodePlayground(playgroundPart1Container, {
      onRun: function (code) {
        if (code && code.length > 50) {
          part1GenCount++;
          if (part1GenCount >= 1) {
            taskCards.setComplete('first-animation', true);
          }
          if (part1GenCount >= 3) {
            taskCards.setComplete('three-animations', true);
          }
        }
      }
    });

    // =============================================
    // Part 2: Art Style Selector
    // =============================================
    var artGrid = document.getElementById('art-grid');

    artStyles.forEach(function (art) {
      var card = document.createElement('div');
      card.className = 'art-card';

      var emojiEl = document.createElement('span');
      emojiEl.className = 'art-emoji';
      emojiEl.textContent = art.emoji;

      var nameEl = document.createElement('div');
      nameEl.className = 'art-name';
      nameEl.textContent = art.name;

      var descEl = document.createElement('div');
      descEl.className = 'art-desc';
      descEl.textContent = art.desc;

      card.appendChild(emojiEl);
      card.appendChild(nameEl);
      card.appendChild(descEl);

      card.addEventListener('click', function () {
        var allCards = artGrid.querySelectorAll('.art-card');
        allCards.forEach(function (c) { c.classList.remove('card-selected'); });
        card.classList.add('card-selected');

        var promptArea = document.querySelector('#playground-part2 textarea');
        if (promptArea) {
          promptArea.value = art.prompt;
          promptArea.focus();
          document.getElementById('playground-part2').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        taskCards.setComplete('try-generative', true);
      });

      artGrid.appendChild(card);
    });

    // =============================================
    // Part 2: Code Playground (Generative Art)
    // =============================================
    var playgroundPart2Container = document.getElementById('playground-part2');
    var part2GenCount = 0;

    var playgroundPart2 = window.CodePlayground(playgroundPart2Container, {
      onRun: function (code) {
        part2GenCount++;
        if (part2GenCount >= 1) {
          taskCards.setComplete('try-generative', true);
        }
        if (part2GenCount >= 2) {
          taskCards.setComplete('make-interactive', true);
        }
      }
    });

    // =============================================
    // Upgrade / Interactive Tips
    // =============================================
    var upgradeGrid = document.getElementById('upgrade-grid');
    var tipClickCount = 0;

    upgradeTips.forEach(function (tip) {
      var card = document.createElement('div');
      card.className = 'tip-card';

      var emojiEl = document.createElement('div');
      emojiEl.className = 'tip-emoji';
      emojiEl.textContent = tip.emoji;

      var titleEl = document.createElement('div');
      titleEl.className = 'tip-title';
      titleEl.textContent = tip.title;

      var descEl = document.createElement('div');
      descEl.className = 'tip-desc';
      descEl.textContent = tip.desc;

      card.appendChild(emojiEl);
      card.appendChild(titleEl);
      card.appendChild(descEl);

      card.addEventListener('click', function () {
        // Load the modification into the Part 2 playground's update textarea
        var textareas = document.querySelectorAll('#playground-part2 textarea');
        if (textareas.length >= 2) {
          textareas[1].value = tip.mod;
          textareas[1].focus();
          document.getElementById('playground-part2').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        tipClickCount++;
        if (tipClickCount >= 1) {
          taskCards.setComplete('make-interactive', true);
        }
      });

      upgradeGrid.appendChild(card);
    });

    // =============================================
    // Export Button
    // =============================================
    var exportContainer = document.getElementById('export-btn');

    window.ExportButton(exportContainer, {
      label: 'Download My Animation',
      getData: function () {
        var code = playgroundPart2.getCode();
        if (!code) {
          code = playgroundPart1.getCode();
        }
        if (!code) {
          return '<!-- No animation generated yet! Go back and create something first. -->';
        }
        taskCards.setComplete('export-animation', true);
        return code;
      },
      filename: 'my-ai-animation.html',
      format: 'html'
    });

    // =============================================
    // Task Sidebar
    // =============================================
    var taskSidebar = document.getElementById('task-sidebar');

    var taskCards = window.TaskCards(taskSidebar, [
      { id: 'first-animation', title: 'Create your first animation', description: 'Generate any animation from the Part 1 challenges' },
      { id: 'three-animations', title: 'Try 3 animation challenges', description: 'Generate at least 3 different animations in Part 1' },
      { id: 'try-generative', title: 'Create generative art', description: 'Pick an art style and generate it in Part 2' },
      { id: 'make-interactive', title: 'Make it interactive', description: 'Use an upgrade tip or your own idea to add interaction' },
      { id: 'export-animation', title: 'Export your best animation', description: 'Download your favorite creation as an HTML file' },
      { id: 'share', title: 'Share with the class', description: 'Show your favorite animation to your partner' }
    ]);
  </script>

</body>
</html>
