<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 8: AI Game Designer - AI Creator Lab</title>
  <link rel="stylesheet" href="/shared/styles.css">
  <style>
    /* Game type selector grid */
    .game-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: var(--space-lg);
    }

    .game-card {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: var(--space-xl) var(--space-lg);
      border: 2px solid var(--color-border);
      text-align: center;
      cursor: pointer;
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal),
                  border-color var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .game-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent 50%, rgba(79, 110, 247, 0.04) 100%);
      pointer-events: none;
    }

    .game-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-4px);
    }

    .game-card.card-selected {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-light);
    }

    .game-card .game-emoji {
      font-size: 3rem;
      margin-bottom: var(--space-sm);
      display: block;
    }

    .game-card .game-name {
      font-size: var(--text-lg);
      font-weight: 700;
      margin-bottom: var(--space-xs);
      color: var(--color-text);
    }

    .game-card .game-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    .game-card .game-tag {
      display: inline-block;
      margin-top: var(--space-sm);
      padding: 0.15em 0.6em;
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      font-weight: 600;
      background: var(--color-primary-light);
      color: var(--color-primary);
    }

    /* Section styling */
    .lesson-section {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-xl);
      border-bottom: 1px solid var(--color-border);
    }

    .lesson-section:last-child {
      border-bottom: none;
    }

    .section-heading {
      font-size: var(--text-xl);
      font-weight: 650;
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    /* Playground wrapper for sizing */
    .playground-wrapper {
      min-height: 500px;
    }

    .playground-wrapper .flex {
      flex-wrap: wrap;
    }

    /* Iteration tips */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--space-md);
    }

    .tip-card {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
      padding: var(--space-md) var(--space-lg);
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal);
      cursor: pointer;
    }

    .tip-card:hover {
      box-shadow: var(--shadow-sm);
      transform: translateY(-2px);
    }

    .tip-card .tip-emoji {
      font-size: 1.8rem;
      margin-bottom: var(--space-xs);
    }

    .tip-card .tip-title {
      font-size: var(--text-md);
      font-weight: 650;
      margin-bottom: var(--space-xs);
    }

    .tip-card .tip-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* Hero banner */
    .hero-banner {
      background: linear-gradient(135deg, #4f6ef7 0%, #7c3aed 50%, #0ea5a5 100%);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      color: #ffffff;
      text-align: center;
      margin-bottom: var(--space-xl);
    }

    .hero-banner h1 {
      font-size: var(--text-2xl);
      margin-bottom: var(--space-sm);
      color: #ffffff;
    }

    .hero-banner p {
      font-size: var(--text-lg);
      opacity: 0.9;
    }

    /* Export section */
    .export-section {
      background: var(--color-success-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .export-section .export-info {
      flex: 1;
      min-width: 200px;
    }

    .export-section .export-info h3 {
      margin-bottom: var(--space-xs);
    }

    .export-section .export-info p {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    /* Quick-start badge on game cards */
    .quick-start {
      position: absolute;
      top: var(--space-sm);
      right: var(--space-sm);
      background: var(--color-warning);
      color: #ffffff;
      font-size: var(--text-xs);
      font-weight: 700;
      padding: 0.15em 0.55em;
      border-radius: var(--radius-full);
    }

    /* Responsive playground panels */
    @media (max-width: 767px) {
      .playground-wrapper .flex {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <!-- Lesson Header -->
  <header class="lesson-header">
    <div class="lesson-badge">
      <span class="lesson-number">08</span>
      <span class="lesson-title">AI Game Designer</span>
    </div>
    <a href="/" class="back-link">&larr; Back to all lessons</a>
  </header>

  <!-- Page Layout -->
  <div class="lesson-page">

    <!-- Main Content Area -->
    <main class="lesson-main" id="main-content">

      <!-- Hero Banner -->
      <div class="hero-banner">
        <h1>&#x1F3AE; AI Game Designer</h1>
        <p>Design, build, and play your own web game — powered by AI!</p>
      </div>

      <!-- Section 1: Game Type Selector -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F579;&#xFE0F; Step 1: Choose Your Game</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Pick a game type to get started. Clicking a card will load a starter prompt into the builder below.
        </p>
        <div class="game-grid" id="game-grid">
          <!-- Game cards rendered by JS -->
        </div>
      </div>

      <!-- Section 2: Code Playground (main build area) -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F6E0;&#xFE0F; Step 2: Build Your Game</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Describe your game in plain English. AI will generate the code. Play-test it in the preview, then tell AI what to change!
        </p>
        <div class="playground-wrapper" id="playground"></div>
      </div>

      <!-- Section 3: Game Iteration Tips -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F4A1; Step 3: Level Up Your Game</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Already have a working game? Click a tip below to copy an improvement idea into the "What to change?" box.
        </p>
        <div class="tips-grid" id="tips-grid">
          <!-- Tip cards rendered by JS -->
        </div>
      </div>

      <!-- Section 4: Export -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F4E6; Step 4: Save Your Game</h2>
        <div class="export-section">
          <div class="export-info">
            <h3>Download your game as an HTML file</h3>
            <p>You can open it in any browser and share it with friends and family!</p>
          </div>
          <div id="export-btn"></div>
        </div>
      </div>

    </main>

    <!-- Task Sidebar -->
    <aside class="lesson-sidebar">
      <div class="task-sidebar" id="task-sidebar"></div>
    </aside>

  </div>

  <script src="/shared/components.js"></script>
  <script>
    // =============================================
    // Game Type Data
    // =============================================
    var gameTypes = [
      {
        emoji: '\u2753',
        name: 'Quiz Game',
        desc: 'Create a trivia quiz with score tracking',
        tag: 'Beginner-friendly',
        quickStart: true,
        prompt: 'Create a fun trivia quiz game with HTML, CSS, and JavaScript. The quiz should have 5 multiple-choice questions about random fun facts (animals, space, food, etc.). Show one question at a time with 4 answer buttons. When the player clicks an answer, highlight it green if correct or red if wrong, then automatically move to the next question after 1 second. Keep track of the score and show a final results screen with a fun message based on how many they got right. Use bright, colorful styling with rounded buttons and a clean layout. Make it look exciting and fun for a 12-year-old!'
      },
      {
        emoji: '\u2B50',
        name: 'Catch Game',
        desc: 'Make a game where you catch falling objects',
        tag: 'Uses mouse/touch',
        quickStart: false,
        prompt: 'Create a catching game with HTML, CSS, and JavaScript using a canvas element. Objects (use emoji like stars, fruits, or coins) fall from the top of the screen at random horizontal positions. The player moves a basket or character at the bottom using the mouse (track mouse X position). When a falling object reaches the basket, the score goes up. If an object hits the ground, the player loses a life (start with 3 lives). Objects should fall faster as the score increases. Show the score and lives at the top. When all lives are lost, show a "Game Over" screen with the final score and a "Play Again" button. Use colorful, fun styling!'
      },
      {
        emoji: '\u{1F9E9}',
        name: 'Maze Runner',
        desc: 'Build a maze game with keyboard controls',
        tag: 'Arrow keys',
        quickStart: false,
        prompt: 'Create a maze game with HTML, CSS, and JavaScript. Draw a simple maze on screen using a grid of cells (around 10x10). The player is a colored circle or emoji character that starts in the top-left corner. The goal (shown as a star or flag) is in the bottom-right corner. The player moves with arrow keys. Walls should block movement. Include a move counter and a simple timer that counts seconds. When the player reaches the goal, show a congratulations message with their time and number of moves, and a "Play Again" button that generates the same maze. Use bright colors: walls are dark, the path is light, and the player stands out.'
      },
      {
        emoji: '\u{1F439}',
        name: 'Whack-a-Mole',
        desc: 'Create a clicking speed game',
        tag: 'Fast clicks',
        quickStart: false,
        prompt: 'Create a whack-a-mole style game with HTML, CSS, and JavaScript. Show a 3x3 grid of holes (styled as circles or squares). A mole (use a fun emoji like a hamster or gopher) randomly pops up in one hole at a time and stays for a short duration before hiding. The player clicks/taps the mole to score a point. The game lasts 30 seconds with a visible countdown timer. Moles should appear faster as time goes on. Show the current score prominently. When time runs out, show the final score with a rating (e.g., "Nice!" for 10+, "Amazing!" for 20+, "LEGENDARY!" for 30+) and a "Play Again" button. Make it colorful and bouncy with fun animations!'
      }
    ];

    // =============================================
    // Iteration Tips Data
    // =============================================
    var iterationTips = [
      {
        emoji: '\u{1F3A8}',
        title: 'Change the theme',
        desc: 'Switch colors, change emojis, or pick a new visual style (space, ocean, jungle...)',
        mod: 'Change the visual theme: use a space theme with dark background, stars, and space-related emojis. Update all colors to match.'
      },
      {
        emoji: '\u{1F514}',
        title: 'Add sound effects',
        desc: 'Make your game beep, ding, or buzz when things happen!',
        mod: 'Add simple sound effects using the Web Audio API (oscillator beeps, no external files). Add a short high-pitched beep when scoring a point, a low buzz when losing, and a victory jingle when winning.'
      },
      {
        emoji: '\u{1F4CA}',
        title: 'Add difficulty levels',
        desc: 'Let players choose Easy, Medium, or Hard before starting',
        mod: 'Add a difficulty selector at the start of the game with three buttons: Easy, Medium, and Hard. Easy should be slower and more forgiving. Hard should be faster and more challenging. Show which difficulty is selected.'
      },
      {
        emoji: '\u23F1\uFE0F',
        title: 'Add a timer',
        desc: 'Challenge players to finish before time runs out!',
        mod: 'Add a countdown timer to the game. Give the player 60 seconds to get the highest score possible. Show the timer prominently at the top. When time runs out, show the final score and a "Try Again" button.'
      },
      {
        emoji: '\u{1F3C6}',
        title: 'High score board',
        desc: 'Save top scores so players can try to beat their best',
        mod: 'Add a high score feature using localStorage. After each game, check if the score is a new personal best. Show the top 5 scores on the game-over screen. Highlight the current score if it made the list.'
      },
      {
        emoji: '\u2728',
        title: 'Add animations',
        desc: 'Make things bounce, spin, fade, or explode!',
        mod: 'Add fun CSS animations: make items bounce when they appear, add a pulsing glow effect on the score, show a confetti-like particle burst when the player scores, and add a smooth fade transition between screens.'
      },
      {
        emoji: '\u{1F464}',
        title: 'Player name',
        desc: 'Let the player type their name and show it in the game',
        mod: 'Add a start screen where the player can type their name. Show "Welcome, [name]!" during the game and include their name on the game-over screen with their score.'
      },
      {
        emoji: '\u{1F31F}',
        title: 'Power-ups',
        desc: 'Add special items that give bonus points or extra lives',
        mod: 'Add power-up items that occasionally appear in the game. Include a golden star worth bonus points and a heart that gives an extra life. Power-ups should look different from regular items and have a special animation when collected.'
      }
    ];

    // =============================================
    // Section 1: Game Type Selector
    // =============================================
    var gameGrid = document.getElementById('game-grid');
    var selectedGame = null;

    gameTypes.forEach(function (game) {
      var card = document.createElement('div');
      card.className = 'game-card';

      if (game.quickStart) {
        var badge = document.createElement('span');
        badge.className = 'quick-start';
        badge.textContent = 'Easy Start';
        card.appendChild(badge);
      }

      var emojiEl = document.createElement('span');
      emojiEl.className = 'game-emoji';
      emojiEl.textContent = game.emoji;

      var nameEl = document.createElement('div');
      nameEl.className = 'game-name';
      nameEl.textContent = game.name;

      var descEl = document.createElement('div');
      descEl.className = 'game-desc';
      descEl.textContent = game.desc;

      var tagEl = document.createElement('span');
      tagEl.className = 'game-tag';
      tagEl.textContent = game.tag;

      card.appendChild(emojiEl);
      card.appendChild(nameEl);
      card.appendChild(descEl);
      card.appendChild(tagEl);

      card.addEventListener('click', function () {
        // Deselect all cards
        var allCards = gameGrid.querySelectorAll('.game-card');
        allCards.forEach(function (c) { c.classList.remove('card-selected'); });

        // Select this one
        card.classList.add('card-selected');
        selectedGame = game;

        // Pre-fill the playground prompt
        var promptArea = document.querySelector('#playground textarea');
        if (promptArea) {
          promptArea.value = game.prompt;
          promptArea.focus();
          // Scroll to playground
          document.getElementById('playground').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        taskCards.setComplete('choose-game', true);
      });

      gameGrid.appendChild(card);
    });

    // =============================================
    // Section 2: Code Playground
    // =============================================
    var playgroundContainer = document.getElementById('playground');
    var generationCount = 0;
    var modificationCount = 0;

    var playground = window.CodePlayground(playgroundContainer, {
      onRun: function (code) {
        generationCount++;
        if (generationCount >= 1) {
          taskCards.setComplete('generate-game', true);
        }
        if (generationCount >= 2) {
          taskCards.setComplete('playtest', true);
        }
      }
    });

    // =============================================
    // Section 3: Iteration Tips
    // =============================================
    var tipsGrid = document.getElementById('tips-grid');

    iterationTips.forEach(function (tip) {
      var card = document.createElement('div');
      card.className = 'tip-card';

      var emojiEl = document.createElement('div');
      emojiEl.className = 'tip-emoji';
      emojiEl.textContent = tip.emoji;

      var titleEl = document.createElement('div');
      titleEl.className = 'tip-title';
      titleEl.textContent = tip.title;

      var descEl = document.createElement('div');
      descEl.className = 'tip-desc';
      descEl.textContent = tip.desc;

      card.appendChild(emojiEl);
      card.appendChild(titleEl);
      card.appendChild(descEl);

      card.addEventListener('click', function () {
        // Find the modification textarea (second textarea in the playground)
        var textareas = document.querySelectorAll('#playground textarea');
        if (textareas.length >= 2) {
          textareas[1].value = tip.mod;
          textareas[1].focus();
          document.getElementById('playground').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // After using 2 tips, mark improvements done
        modificationCount++;
        if (modificationCount >= 2) {
          taskCards.setComplete('improvements', true);
        }
      });

      tipsGrid.appendChild(card);
    });

    // =============================================
    // Section 4: Export Button
    // =============================================
    var exportContainer = document.getElementById('export-btn');

    window.ExportButton(exportContainer, {
      label: 'Download My Game',
      getData: function () {
        var code = playground.getCode();
        if (!code) {
          return '<!-- No game generated yet! Go build one first. -->';
        }
        taskCards.setComplete('export-game', true);
        return code;
      },
      filename: 'my-ai-game.html',
      format: 'html'
    });

    // =============================================
    // Task Sidebar
    // =============================================
    var taskSidebar = document.getElementById('task-sidebar');

    var taskCards = window.TaskCards(taskSidebar, [
      { id: 'choose-game', title: 'Choose your game type', description: 'Pick Quiz, Catch, Maze, or Whack-a-Mole' },
      { id: 'generate-game', title: 'Generate your first game', description: 'Click Generate and see it come to life' },
      { id: 'playtest', title: 'Play-test your game', description: 'Try playing it — does it work?' },
      { id: 'improvements', title: 'Make 2 improvements', description: 'Use the tips or your own ideas' },
      { id: 'export-game', title: 'Export your game', description: 'Download it as an HTML file' }
    ]);
  </script>

</body>
</html>
