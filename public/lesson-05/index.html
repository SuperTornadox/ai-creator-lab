<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 5: AI Web Designer - AI Creator Lab</title>
  <link rel="stylesheet" href="/shared/styles.css">
  <style>
    /* Section dividers */
    .lesson-section {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-xl);
      border-bottom: 1px solid var(--color-border);
    }

    .lesson-section:last-child {
      border-bottom: none;
    }

    .section-heading {
      font-size: var(--text-xl);
      font-weight: 650;
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    /* Part divider */
    .part-divider {
      text-align: center;
      padding: var(--space-xl) 0;
      border-top: 3px solid var(--color-primary);
      border-bottom: 3px solid var(--color-primary);
      margin: var(--space-xl) 0;
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
      border-radius: var(--radius-lg);
    }

    .part-divider h2 {
      font-size: var(--text-2xl);
      margin-bottom: var(--space-xs);
    }

    .part-divider p {
      color: var(--color-text-muted);
      font-size: var(--text-md);
    }

    /* Welcome banner */
    .welcome-banner {
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      text-align: center;
      margin-bottom: var(--space-xl);
    }

    .welcome-banner h2 {
      margin-bottom: var(--space-sm);
    }

    .welcome-banner p {
      color: var(--color-text-muted);
      font-size: var(--text-md);
      max-width: 600px;
      margin-inline: auto;
      line-height: 1.6;
    }

    /* Template cards grid */
    .template-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: var(--space-lg);
      margin-bottom: var(--space-lg);
    }

    .template-card {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      padding: var(--space-xl) var(--space-lg);
      border: 2px solid var(--color-border);
      text-align: center;
      cursor: pointer;
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal),
                  border-color var(--transition-normal);
      position: relative;
      overflow: hidden;
    }

    .template-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent 50%, rgba(79, 110, 247, 0.04) 100%);
      pointer-events: none;
    }

    .template-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-4px);
    }

    .template-card.card-selected {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-light);
    }

    .template-card .template-emoji {
      font-size: 3rem;
      margin-bottom: var(--space-sm);
      display: block;
    }

    .template-card .template-name {
      font-size: var(--text-lg);
      font-weight: 700;
      margin-bottom: var(--space-xs);
      color: var(--color-text);
    }

    .template-card .template-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    .template-card .template-tag {
      display: inline-block;
      margin-top: var(--space-sm);
      padding: 0.15em 0.6em;
      border-radius: var(--radius-full);
      font-size: var(--text-xs);
      font-weight: 600;
      background: var(--color-primary-light);
      color: var(--color-primary);
    }

    .template-card .template-tag.tag-easy {
      background: var(--color-success-light);
      color: #16a34a;
    }

    /* Upgrade tips grid */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--space-md);
    }

    .tip-card {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
      padding: var(--space-md) var(--space-lg);
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal);
      cursor: pointer;
    }

    .tip-card:hover {
      box-shadow: var(--shadow-sm);
      transform: translateY(-2px);
    }

    .tip-card .tip-emoji {
      font-size: 1.8rem;
      margin-bottom: var(--space-xs);
    }

    .tip-card .tip-title {
      font-size: var(--text-md);
      font-weight: 650;
      margin-bottom: var(--space-xs);
    }

    .tip-card .tip-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* Playground containers */
    #playground-part1 {
      min-height: 500px;
    }

    .playground-wrapper {
      min-height: 500px;
    }

    .playground-wrapper .flex {
      flex-wrap: wrap;
    }

    /* Tips box */
    .tips-box {
      background: var(--color-accent-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-top: var(--space-md);
    }

    .tips-box h4 {
      margin-bottom: var(--space-sm);
      color: var(--color-accent-hover);
    }

    .tips-box ul {
      list-style: none;
      padding: 0;
    }

    .tips-box li {
      padding: var(--space-xs) 0;
      font-size: var(--text-sm);
      line-height: 1.6;
    }

    .tips-box li::before {
      content: "\2728 ";
    }

    /* Design principles info box */
    .design-principles {
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-top: var(--space-xl);
    }

    .design-principles h3 {
      font-size: var(--text-lg);
      margin-bottom: var(--space-md);
      text-align: center;
    }

    .principles-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: var(--space-md);
    }

    .principle-item {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      padding: var(--space-md) var(--space-lg);
      border: 1px solid var(--color-border);
      text-align: center;
    }

    .principle-item .principle-emoji {
      font-size: 2rem;
      margin-bottom: var(--space-xs);
    }

    .principle-item .principle-name {
      font-size: var(--text-md);
      font-weight: 700;
      margin-bottom: var(--space-xs);
    }

    .principle-item .principle-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.5;
    }

    /* Export section */
    .export-section {
      background: var(--color-success-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .export-section .export-info {
      flex: 1;
      min-width: 200px;
    }

    .export-section .export-info h3 {
      margin-bottom: var(--space-xs);
    }

    .export-section .export-info p {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    /* Gallery showcase */
    .gallery-showcase {
      background: var(--color-bg);
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      margin-top: var(--space-lg);
      text-align: center;
    }

    .gallery-showcase h3 {
      margin-bottom: var(--space-sm);
    }

    .gallery-showcase p {
      color: var(--color-text-muted);
      font-size: var(--text-md);
      margin-bottom: var(--space-md);
    }

    .gallery-showcase .showcase-cta {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-md) var(--space-lg);
      background: var(--color-surface);
      border: 2px dashed var(--color-border);
      border-radius: var(--radius-md);
      font-size: var(--text-md);
      color: var(--color-text-muted);
    }

    .gallery-showcase .showcase-cta .showcase-emoji {
      font-size: 1.5rem;
    }

    /* Responsive */
    @media (max-width: 767px) {
      #playground-part1 .flex,
      .playground-wrapper .flex {
        flex-direction: column;
      }

      .template-grid {
        grid-template-columns: 1fr 1fr;
      }

      .tips-grid {
        grid-template-columns: 1fr 1fr;
      }

      .principles-grid {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- Lesson Header -->
  <header class="lesson-header">
    <div class="lesson-badge">
      <span class="lesson-number">05</span>
      <span class="lesson-title">AI Web Designer &mdash; Build Your Own Website</span>
    </div>
    <a href="/" class="back-link">&larr; Back to all lessons</a>
  </header>

  <!-- Page Layout -->
  <div class="lesson-page">

    <!-- Main Content Area -->
    <main class="lesson-main" id="main-content">

      <!-- ===== PART 1: My First Website ===== -->

      <!-- Welcome Banner -->
      <div class="welcome-banner">
        <h2>&#x1F310; Welcome to AI Web Designer!</h2>
        <p>
          Today you will build a real website &mdash; your very own page on the internet!
          Pick a template, describe what you want, and AI will generate a full website for you.
          No coding experience needed.
        </p>
      </div>

      <!-- Template Cards -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F3A8; Pick Your Website Template</h2>
        <p class="mb-md" style="color: var(--color-text-muted); font-size: var(--text-sm);">
          Click a card below to load its description into the website builder. You can always customize it later!
        </p>
        <div class="template-grid" id="template-grid">
          <!-- Rendered by JS -->
        </div>
      </div>

      <!-- Code Playground Part 1 -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F6E0;&#xFE0F; Website Builder</h2>
        <div id="playground-part1"></div>

        <div class="tips-box">
          <h4>&#x1F4A1; How to Describe a Website</h4>
          <ul>
            <li>Describe the sections you want: header, about me, hobbies, gallery, footer</li>
            <li>Mention specific colors: "Use a blue and white color scheme with a dark header"</li>
            <li>Describe the layout: "Put the photo on the left and the bio on the right"</li>
            <li>Add content details: "My hobbies are drawing, soccer, and playing piano"</li>
            <li>Say how it should feel: "Make it fun and colorful" or "Make it clean and professional"</li>
            <li>Start simple, then use "What to change?" to add more sections!</li>
          </ul>
        </div>
      </div>

      <!-- ===== PART 2 DIVIDER ===== -->
      <div class="part-divider">
        <h2>&#x2B06;&#xFE0F; Part 2: Customize &amp; Expand</h2>
        <p>Take your website to the next level with upgrades and design principles!</p>
      </div>

      <!-- Website Upgrades Tips -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F680; Website Upgrades</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Already have a website? Click a tip below to copy an upgrade idea into the "What to change?" box. Try at least 2!
        </p>
        <div class="tips-grid" id="tips-grid">
          <!-- Tip cards rendered by JS -->
        </div>
      </div>

      <!-- Advanced Playground -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F6E0;&#xFE0F; Advanced Customization</h2>
        <p style="margin-bottom: var(--space-lg); color: var(--color-text-muted);">
          Use this playground to keep upgrading your website, or start a completely new design from scratch!
        </p>
        <div class="playground-wrapper" id="playground-part2"></div>
      </div>

      <!-- Design Principles -->
      <div class="lesson-section">
        <div class="design-principles">
          <h3>&#x1F3AF; 4 Design Principles Every Designer Knows</h3>
          <div class="principles-grid">
            <div class="principle-item">
              <div class="principle-emoji">&#x1F3AF;</div>
              <div class="principle-name">Contrast</div>
              <div class="principle-desc">Make important things stand out! Use dark text on light backgrounds. Make headings bigger and bolder than body text.</div>
            </div>
            <div class="principle-item">
              <div class="principle-emoji">&#x1F4D0;</div>
              <div class="principle-name">Alignment</div>
              <div class="principle-desc">Line things up neatly. Text, images, and buttons should follow invisible gridlines. Nothing looks "randomly placed."</div>
            </div>
            <div class="principle-item">
              <div class="principle-emoji">&#x1F32C;&#xFE0F;</div>
              <div class="principle-name">Whitespace</div>
              <div class="principle-desc">Give elements room to breathe! Cramming everything together looks messy. Space between sections makes pages easier to read.</div>
            </div>
            <div class="principle-item">
              <div class="principle-emoji">&#x1F504;</div>
              <div class="principle-name">Consistency</div>
              <div class="principle-desc">Use the same fonts, colors, and button styles throughout. If your header is blue, your buttons should probably be blue too!</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== SHARE & EXPORT ===== -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F4E6; Save &amp; Share Your Website</h2>
        <div class="export-section">
          <div class="export-info">
            <h3>Download your website as an HTML file</h3>
            <p>You can open it in any browser and share it with friends and family! It is a real website file.</p>
          </div>
          <div id="export-btn"></div>
        </div>

        <div class="gallery-showcase">
          <h3>&#x1F3C6; Website Gallery</h3>
          <p>Time to show off! When the teacher says "share time," show your website to a partner and swap feedback.</p>
          <div class="showcase-cta">
            <span class="showcase-emoji">&#x1F4BB;</span>
            <span>Swap laptops with a partner and explore each other's websites!</span>
          </div>
        </div>
      </div>

    </main>

    <!-- Task Sidebar -->
    <aside class="lesson-sidebar">
      <div class="task-sidebar" id="task-sidebar"></div>
    </aside>

  </div>

  <script src="/shared/components.js"></script>
  <script>
    // =============================================
    // Website Template Data
    // =============================================
    var templates = [
      {
        emoji: '\uD83D\uDE4B',
        name: 'Personal Portfolio',
        desc: 'An "About Me" page with photo placeholder, bio section, and hobbies list',
        tag: 'Great First Choice',
        tagClass: 'tag-easy',
        prompt: 'Create a personal portfolio website with HTML, CSS, and JavaScript. Include these sections: (1) A hero header with a large greeting "Hi, I\'m [Your Name]!" and a short tagline like "Student, Creator, Dreamer." Use a gradient background for the header. (2) An "About Me" section with a circular photo placeholder (use a gray circle with the text "Your Photo" inside it) on the left and a bio paragraph on the right that says "I am a 12-year-old student who loves learning new things. I enjoy being creative and exploring the world around me." (3) A "My Hobbies" section showing 4 hobby cards in a grid. Each card has an emoji icon and a title: Drawing, Soccer, Video Games, Reading. Cards should have a subtle shadow and hover effect. (4) A footer with "Made with AI Creator Lab" and the current year. Use a clean, modern design with a blue-and-white color scheme. Make it look professional but fun for a 12-year-old.'
      },
      {
        emoji: '\u2B50',
        name: 'Fan Page',
        desc: 'A page dedicated to your favorite topic: a game, animal, movie, or anything!',
        tag: 'Pick Your Passion',
        tagClass: '',
        prompt: 'Create a fan page website with HTML, CSS, and JavaScript dedicated to cats (the student can customize the topic later). Include: (1) A dramatic hero section with a big bold title "I LOVE CATS!" on a dark background with subtle animated stars or sparkles. (2) A "Fun Facts" section with 5 interesting cat facts, each in its own colorful card with a cat emoji and a number. (3) A "Top 5 Cutest Cat Breeds" ranked list with descriptions for each breed (Ragdoll, Scottish Fold, Munchkin, Persian, Maine Coon). Style each list item as a card with a ranking number. (4) A "Why Cats Are The Best" section with 3 reasons in columns with icons. (5) A footer that says "Made by a cat lover." Use a playful color scheme with purple and gold. Add hover effects on cards. Make it fun, energetic, and visually exciting with big fonts and bold colors!'
      },
      {
        emoji: '\uD83C\uDF73',
        name: 'Recipe Book',
        desc: 'A mini cookbook with 3-4 recipes, ingredients, and descriptions',
        tag: 'Food Lovers',
        tagClass: '',
        prompt: 'Create a recipe book website with HTML, CSS, and JavaScript. Include: (1) A hero header with the title "My Recipe Book" and a subtitle "Delicious recipes I love to make!" Use a warm background color like orange or terracotta. (2) A recipe grid showing 4 recipe cards. Each card has a food emoji, the recipe name, prep time, difficulty level (Easy/Medium), and a short description. Recipes: Chocolate Chip Cookies (30 min, Easy), Homemade Pizza (45 min, Medium), Fruit Smoothie (5 min, Easy), Mac and Cheese (25 min, Easy). Cards should have a white background with rounded corners and shadows. (3) When you click a recipe card, it expands or scrolls to show the full recipe: ingredients list and step-by-step instructions. (4) A "Cooking Tips" section at the bottom with 3 tips in colorful boxes: "Always wash your hands first," "Read the entire recipe before starting," "Have fun and be creative!" (5) A footer with "Made with love and AI." Use a warm, cozy color palette with cream, orange, and brown tones. Add hover animations on cards.'
      },
      {
        emoji: '\uD83D\uDCF0',
        name: 'News Blog',
        desc: 'A simple blog with 2-3 articles, headlines, and dates',
        tag: 'For Writers',
        tagClass: '',
        prompt: 'Create a news blog website with HTML, CSS, and JavaScript. Include: (1) A sleek header with the blog name "The Daily Spark" and a navigation bar with links: Home, Tech, Science, Fun. Make the nav bar sticky at the top. (2) A featured article section at the top with a large headline "Scientists Discover New Species of Glowing Fish in Deep Ocean", a date "February 24, 2026", a placeholder image area (gray rectangle with "Featured Image" text), and the first paragraph of the article. (3) Below that, a grid of 2 more article cards: "Students Build Robot That Can Play Piano" (Tech category) and "New Study Says Laughing Makes You Smarter" (Science category). Each card has a category tag, title, date, and a short preview paragraph. Cards should be clickable-looking with hover effects. (4) A sidebar (or section below on mobile) with "Popular Tags" showing clickable tag pills: Technology, Space, Animals, School, Sports, Gaming. (5) A footer with "The Daily Spark - Made by a young journalist." Use a newspaper-inspired design: clean, black and white with blue accent color for links and tags. Use a serif font for headlines and sans-serif for body text.'
      }
    ];

    // =============================================
    // Website Upgrade Tips
    // =============================================
    var upgradeTips = [
      {
        emoji: '\uD83D\uDDFA\uFE0F',
        title: 'Add a navigation bar',
        desc: 'A sticky nav bar at the top so visitors can jump to any section',
        mod: 'Add a sticky navigation bar at the very top of the page. It should have links to each section of the website (like Home, About, Hobbies, Contact). When you click a link, the page should smooth-scroll to that section. Style the nav bar with a solid background color, some padding, and make the links change color on hover.'
      },
      {
        emoji: '\uD83D\uDDBC\uFE0F',
        title: 'Add a photo gallery',
        desc: 'A grid of image placeholders that look great together',
        mod: 'Add a "Photo Gallery" section to the website. Create a grid of 6 placeholder images (use colored rectangles with text like "Photo 1", "Photo 2", etc. in different pastel colors). The grid should be 3 columns on desktop and 2 columns on mobile. When you hover over a photo, it should slightly zoom in with a smooth animation. Add a section title "My Gallery" above it.'
      },
      {
        emoji: '\uD83D\uDCE7',
        title: 'Add a contact form',
        desc: 'A form where visitors can type their name, email, and a message',
        mod: 'Add a "Contact Me" section at the bottom of the page (before the footer). Include a form with fields for Name, Email, and Message (textarea). Add a "Send Message" button. Style the form with rounded input fields, proper spacing, and a nice button that changes color on hover. The form doesn\'t need to actually send anything - just show an alert that says "Thanks for your message!" when the button is clicked.'
      },
      {
        emoji: '\uD83C\uDF19',
        title: 'Change the color scheme',
        desc: 'Try dark mode, pastel colors, neon, or a completely different palette',
        mod: 'Change the entire color scheme to a dark mode design. Use a dark background (#1a1a2e or similar dark blue-gray), light text (#e0e0e0), and bright accent colors (like cyan #00d4ff or neon purple #b84dff) for headings, buttons, and links. Make sure all text is readable against the dark background. Update cards and sections to use slightly lighter dark backgrounds (#16213e) so they stand out from the main background.'
      },
      {
        emoji: '\u2728',
        title: 'Add animations',
        desc: 'Make elements fade in, slide in, or bounce when the page loads',
        mod: 'Add CSS animations to the website. Make the header text fade in and slide down when the page loads. Make each card or section fade in from below as you scroll down (use a simple scroll-triggered animation with JavaScript IntersectionObserver). Add a gentle pulse animation on buttons when you hover over them. Use smooth CSS transitions throughout - nothing should feel sudden or jarring.'
      },
      {
        emoji: '\uD83D\uDC63',
        title: 'Add a footer with social links',
        desc: 'A proper footer with fake social media links and copyright info',
        mod: 'Redesign the footer section. Make it a full-width dark footer with: (1) A row of social media icon links using text/emoji placeholders for Instagram, YouTube, TikTok, and GitHub. Each link should have a hover effect that changes its color. (2) A copyright line that says "Made with AI Creator Lab, 2026." (3) A small "Back to top" link that smooth-scrolls back to the top of the page. Give the footer generous padding and center-align everything.'
      },
      {
        emoji: '\uD83D\uDCF1',
        title: 'Make it mobile-friendly',
        desc: 'Ensure your website looks great on phones with responsive design',
        mod: 'Make the website fully responsive for mobile screens. Add CSS media queries so that: (1) On screens narrower than 768px, multi-column layouts stack into a single column. (2) Font sizes adjust to be readable on small screens. (3) The navigation bar becomes a simple vertical stack or hamburger-style on mobile. (4) Images and cards take full width on mobile. (5) Add proper padding so nothing touches the screen edges. Test the layout logic carefully.'
      },
      {
        emoji: '\uD83C\uDFAE',
        title: 'Add a fun interactive element',
        desc: 'A quiz, poll, like button, or theme toggle - surprise your visitors!',
        mod: 'Add a fun interactive element to the website. Create a "Quick Quiz About Me" section with 3 multiple-choice questions about the website creator (e.g., "What is my favorite hobby?" with 4 options). When the visitor clicks an answer, highlight it green if correct or red if wrong. After answering all 3, show a message like "You know me well!" or "Check out my About section to learn more!" Style the quiz with colorful option buttons and fun feedback animations.'
      }
    ];

    // =============================================
    // Part 1: Template Cards
    // =============================================
    var templateGrid = document.getElementById('template-grid');

    templates.forEach(function (template) {
      var card = document.createElement('div');
      card.className = 'template-card';

      var emojiEl = document.createElement('span');
      emojiEl.className = 'template-emoji';
      emojiEl.textContent = template.emoji;

      var nameEl = document.createElement('div');
      nameEl.className = 'template-name';
      nameEl.textContent = template.name;

      var descEl = document.createElement('div');
      descEl.className = 'template-desc';
      descEl.textContent = template.desc;

      var tagEl = document.createElement('span');
      tagEl.className = 'template-tag' + (template.tagClass ? ' ' + template.tagClass : '');
      tagEl.textContent = template.tag;

      card.appendChild(emojiEl);
      card.appendChild(nameEl);
      card.appendChild(descEl);
      card.appendChild(tagEl);

      card.addEventListener('click', function () {
        // Deselect all
        var allCards = templateGrid.querySelectorAll('.template-card');
        allCards.forEach(function (c) { c.classList.remove('card-selected'); });

        // Select this one
        card.classList.add('card-selected');

        // Load prompt into Part 1 playground
        var genTextarea = document.querySelector('#playground-part1 textarea');
        if (genTextarea) {
          genTextarea.value = template.prompt;
          genTextarea.focus();
        }

        // Scroll to playground
        document.getElementById('playground-part1').scrollIntoView({ behavior: 'smooth', block: 'start' });

        taskCards.setComplete('choose-template', true);
      });

      templateGrid.appendChild(card);
    });

    // =============================================
    // Part 1: Code Playground
    // =============================================
    var playgroundPart1Container = document.getElementById('playground-part1');
    var part1GenCount = 0;

    var playgroundPart1 = window.CodePlayground(playgroundPart1Container, {
      onRun: function (code) {
        if (code && code.length > 50) {
          taskCards.setComplete('generate-site', true);
          part1GenCount++;
        }
      },
      guidedTasks: templates.map(function (t) {
        return {
          title: t.emoji + ' ' + t.name,
          description: t.desc,
          prompt: t.prompt
        };
      })
    });

    // =============================================
    // Part 2: Upgrade Tip Cards
    // =============================================
    var tipsGrid = document.getElementById('tips-grid');
    var tipClickCount = 0;

    upgradeTips.forEach(function (tip) {
      var card = document.createElement('div');
      card.className = 'tip-card';

      var emojiEl = document.createElement('div');
      emojiEl.className = 'tip-emoji';
      emojiEl.textContent = tip.emoji;

      var titleEl = document.createElement('div');
      titleEl.className = 'tip-title';
      titleEl.textContent = tip.title;

      var descEl = document.createElement('div');
      descEl.className = 'tip-desc';
      descEl.textContent = tip.desc;

      card.appendChild(emojiEl);
      card.appendChild(titleEl);
      card.appendChild(descEl);

      card.addEventListener('click', function () {
        // Try Part 2 playground first, then fall back to Part 1
        var textareas = document.querySelectorAll('#playground-part2 textarea');
        if (textareas.length >= 2) {
          textareas[1].value = tip.mod;
          textareas[1].focus();
          document.getElementById('playground-part2').scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
          var part1Textareas = document.querySelectorAll('#playground-part1 textarea');
          if (part1Textareas.length >= 2) {
            part1Textareas[1].value = tip.mod;
            part1Textareas[1].focus();
            document.getElementById('playground-part1').scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }

        tipClickCount++;
        if (tipClickCount >= 2) {
          taskCards.setComplete('upgrade-site', true);
        }
      });

      tipsGrid.appendChild(card);
    });

    // =============================================
    // Part 2: Advanced Code Playground
    // =============================================
    var playgroundPart2Container = document.getElementById('playground-part2');
    var part2GenCount = 0;

    var playgroundPart2 = window.CodePlayground(playgroundPart2Container, {
      onRun: function (code) {
        part2GenCount++;
        if (part2GenCount >= 1) {
          taskCards.setComplete('upgrade-site', true);
        }
      }
    });

    // =============================================
    // Export Button
    // =============================================
    var exportContainer = document.getElementById('export-btn');

    window.ExportButton(exportContainer, {
      label: 'Download My Website',
      getData: function () {
        var code = playgroundPart2.getCode();
        if (!code) {
          code = playgroundPart1.getCode();
        }
        if (!code) {
          return '<!-- No website generated yet! Go back and build one first. -->';
        }
        taskCards.setComplete('export-site', true);
        return code;
      },
      filename: 'my-website.html',
      format: 'html'
    });

    // =============================================
    // Task Sidebar
    // =============================================
    var taskSidebar = document.getElementById('task-sidebar');

    var taskCards = window.TaskCards(taskSidebar, [
      { id: 'choose-template', title: 'Choose a website template', description: 'Click one of the 4 template cards in Part 1' },
      { id: 'generate-site', title: 'Generate your first website', description: 'Use the Website Builder to create your site' },
      { id: 'customize', title: 'Customize your website', description: 'Use "What to change?" to modify your site' },
      { id: 'upgrade-site', title: 'Try 2+ website upgrades', description: 'Use the upgrade tips in Part 2 to level up' },
      { id: 'learn-design', title: 'Learn 4 design principles', description: 'Read about Contrast, Alignment, Whitespace, Consistency' },
      { id: 'export-site', title: 'Export your website', description: 'Download your website as an HTML file' }
    ]);

    // Auto-complete design principles when user scrolls to them
    var principlesSection = document.querySelector('.design-principles');
    if (principlesSection) {
      var observer = new IntersectionObserver(function (entries) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting) {
            taskCards.setComplete('learn-design', true);
            observer.disconnect();
          }
        });
      }, { threshold: 0.5 });
      observer.observe(principlesSection);
    }

    // Track customization via Part 1 playground modifications
    var checkCustomize = setInterval(function () {
      var modTextareas = document.querySelectorAll('#playground-part1 textarea');
      if (modTextareas.length >= 2 && part1GenCount >= 1) {
        // Check if the user has used the modification textarea at least once
        // We track this via the generation count being >= 2 (initial + at least one modification)
        if (part1GenCount >= 2) {
          taskCards.setComplete('customize', true);
          clearInterval(checkCustomize);
        }
      }
    }, 3000);
  </script>

</body>
</html>
