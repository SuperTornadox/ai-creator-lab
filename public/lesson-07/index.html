<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lesson 7: AI Coder (Part 1) - AI Creator Lab</title>
  <link rel="stylesheet" href="/shared/styles.css">
  <style>
    /* Section dividers */
    .lesson-section {
      margin-bottom: var(--space-xl);
      padding-bottom: var(--space-xl);
      border-bottom: 1px solid var(--color-border);
    }

    .lesson-section:last-child {
      border-bottom: none;
    }

    .section-heading {
      font-size: var(--text-xl);
      font-weight: 650;
      margin-bottom: var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    /* Welcome banner */
    .welcome-banner {
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-secondary-light));
      border-radius: var(--radius-lg);
      padding: var(--space-xl);
      text-align: center;
      margin-bottom: var(--space-xl);
    }

    .welcome-banner h2 {
      margin-bottom: var(--space-sm);
    }

    .welcome-banner p {
      color: var(--color-text-muted);
      font-size: var(--text-md);
      max-width: 600px;
      margin-inline: auto;
      line-height: 1.6;
    }

    /* Challenge cards grid */
    .challenge-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
    }

    .challenge-card {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-sm);
      padding: var(--space-lg);
      border: 2px solid var(--color-border);
      text-align: center;
      cursor: pointer;
      transition: box-shadow var(--transition-normal),
                  transform var(--transition-normal),
                  border-color var(--transition-normal);
    }

    .challenge-card:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
    }

    .challenge-card.card-selected {
      border-color: var(--color-primary);
      box-shadow: 0 0 0 3px var(--color-primary-light);
    }

    .challenge-card .challenge-emoji {
      font-size: 2.5rem;
      margin-bottom: var(--space-sm);
    }

    .challenge-card .challenge-name {
      font-size: var(--text-md);
      font-weight: 650;
      margin-bottom: var(--space-xs);
    }

    .challenge-card .challenge-desc {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
      line-height: 1.4;
    }

    .challenge-card .difficulty {
      display: inline-block;
      margin-top: var(--space-sm);
      font-size: var(--text-xs);
      font-weight: 700;
      padding: 0.2em 0.6em;
      border-radius: var(--radius-full);
    }

    .difficulty-easy {
      background: var(--color-success-light);
      color: #16a34a;
    }

    .difficulty-medium {
      background: var(--color-warning-light);
      color: #b45309;
    }

    .difficulty-hard {
      background: var(--color-secondary-light);
      color: var(--color-secondary);
    }

    /* Playground container override for full width */
    #playground-container {
      min-height: 500px;
    }

    /* Export section */
    .export-section {
      display: flex;
      gap: var(--space-md);
      align-items: center;
      flex-wrap: wrap;
    }

    .export-section p {
      font-size: var(--text-sm);
      color: var(--color-text-muted);
    }

    /* Tips box */
    .tips-box {
      background: var(--color-accent-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin-top: var(--space-md);
    }

    .tips-box h4 {
      margin-bottom: var(--space-sm);
      color: var(--color-accent-hover);
    }

    .tips-box ul {
      list-style: none;
      padding: 0;
    }

    .tips-box li {
      padding: var(--space-xs) 0;
      font-size: var(--text-sm);
      line-height: 1.6;
    }

    .tips-box li::before {
      content: "\2728 ";
    }

    /* Responsive: stack playground panels on mobile */
    @media (max-width: 767px) {
      #playground-container .flex {
        flex-direction: column;
      }

      .challenge-grid {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>

  <!-- Lesson Header -->
  <header class="lesson-header">
    <div class="lesson-badge">
      <span class="lesson-number">07</span>
      <span class="lesson-title">AI Coder (Part 1)</span>
    </div>
    <a href="/" class="back-link">&larr; Back to all lessons</a>
  </header>

  <!-- Page Layout -->
  <div class="lesson-page">

    <!-- Main Content Area -->
    <main class="lesson-main" id="main-content">

      <!-- Welcome Banner -->
      <div class="welcome-banner">
        <h2>&#x1F4BB; Welcome to AI Coder!</h2>
        <p>
          Today you become a coder! No experience needed &mdash; just describe what you want to build, and AI will write the code for you. You are in charge of the ideas.
        </p>
      </div>

      <!-- Section 1: Challenge Cards -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F3AF; Pick a Challenge</h2>
        <p class="mb-md" style="color: var(--color-text-muted); font-size: var(--text-sm);">
          Click any challenge below to load its description into the playground. Start with the easy ones and work your way up!
        </p>
        <div class="challenge-grid" id="challenge-grid">
          <!-- Rendered by JS -->
        </div>
      </div>

      <!-- Section 2: Code Playground -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F6E0;&#xFE0F; Code Playground</h2>
        <div id="playground-container"></div>

        <div class="tips-box">
          <h4>&#x1F4A1; Tips for Great Descriptions</h4>
          <ul>
            <li>Be specific! "A big red button" is better than "a button"</li>
            <li>Describe the behavior: "When I click it, the number goes up by 1"</li>
            <li>Start simple, then use "What to change?" to add features</li>
            <li>If something doesn't work, try describing it differently</li>
            <li>You can always click "Generate" again to start over</li>
          </ul>
        </div>
      </div>

      <!-- Section 3: Export -->
      <div class="lesson-section">
        <h2 class="section-heading">&#x1F4E5; Save Your Work</h2>
        <div class="export-section">
          <div id="export-container"></div>
          <p>Download your creation as an HTML file. You can open it in any browser!</p>
        </div>
      </div>

    </main>

    <!-- Task Sidebar -->
    <aside class="lesson-sidebar">
      <div class="task-sidebar" id="task-sidebar"></div>
    </aside>

  </div>

  <script src="/shared/components.js"></script>
  <script>
    // =============================================
    // Challenge Data
    // =============================================
    var challenges = [
      {
        emoji: '\uD83C\uDFA8',
        name: 'Color Clicker',
        desc: 'A button that changes to a random color when clicked',
        difficulty: 'easy',
        prompt: 'Make a page with a big button in the center. When I click the button, it should change to a random background color. The button should say "Click me!" and be large and rounded.'
      },
      {
        emoji: '\uD83D\uDD22',
        name: 'Click Counter',
        desc: 'A page that counts how many times you click a button',
        difficulty: 'easy',
        prompt: 'Make a page that counts how many times I click a button. Show the count in a big number in the center. The button should say "Click!" below the number. Make it look clean and colorful.'
      },
      {
        emoji: '\u26BD',
        name: 'Bouncing Ball',
        desc: 'A ball that bounces around the screen',
        difficulty: 'medium',
        prompt: 'Create an animation of a colorful ball that bounces around the screen. The ball should bounce off all four walls. Make the ball a bright color and give it a smooth animation. The ball should move on its own as soon as the page loads.'
      },
      {
        emoji: '\u270F\uFE0F',
        name: 'Drawing Canvas',
        desc: 'A canvas where you can draw with the mouse',
        difficulty: 'medium',
        prompt: 'Make a drawing canvas that fills most of the page. When I hold down the mouse button and move, it should draw a colorful line. Add a few color buttons at the top to pick different drawing colors (red, blue, green, black), and a "Clear" button to erase everything.'
      },
      {
        emoji: '\uD83C\uDFAE',
        name: 'Mini Game',
        desc: 'A simple clicking game with a score',
        difficulty: 'hard',
        prompt: 'Create a simple clicking game. A circle should appear at a random position on the screen. When I click on it, my score goes up by 1 and the circle moves to a new random position. Show the score at the top. Add a 30-second timer that counts down, and when time runs out show "Game Over!" with the final score and a "Play Again" button.'
      }
    ];

    // =============================================
    // Section 1: Challenge Cards
    // =============================================
    var challengeGrid = document.getElementById('challenge-grid');
    var selectedChallenge = null;

    challenges.forEach(function (challenge, index) {
      var card = document.createElement('div');
      card.className = 'challenge-card';

      var emojiEl = document.createElement('div');
      emojiEl.className = 'challenge-emoji';
      emojiEl.textContent = challenge.emoji;

      var nameEl = document.createElement('div');
      nameEl.className = 'challenge-name';
      nameEl.textContent = challenge.name;

      var descEl = document.createElement('div');
      descEl.className = 'challenge-desc';
      descEl.textContent = challenge.desc;

      var diffLabel = document.createElement('span');
      diffLabel.className = 'difficulty';
      if (challenge.difficulty === 'easy') {
        diffLabel.classList.add('difficulty-easy');
        diffLabel.textContent = 'Easy';
      } else if (challenge.difficulty === 'medium') {
        diffLabel.classList.add('difficulty-medium');
        diffLabel.textContent = 'Medium';
      } else {
        diffLabel.classList.add('difficulty-hard');
        diffLabel.textContent = 'Hard';
      }

      card.appendChild(emojiEl);
      card.appendChild(nameEl);
      card.appendChild(descEl);
      card.appendChild(diffLabel);

      card.addEventListener('click', function () {
        // Deselect all
        var allCards = challengeGrid.querySelectorAll('.challenge-card');
        allCards.forEach(function (c) { c.classList.remove('card-selected'); });
        // Select this one
        card.classList.add('card-selected');
        selectedChallenge = challenge;

        // Load prompt into the playground's generate textarea
        var genTextarea = document.querySelector('#playground-container textarea');
        if (genTextarea) {
          genTextarea.value = challenge.prompt;
          genTextarea.focus();
        }

        // Scroll to playground
        document.getElementById('playground-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
      });

      challengeGrid.appendChild(card);
    });

    // =============================================
    // Section 2: Code Playground
    // =============================================
    var playgroundContainer = document.getElementById('playground-container');

    var playground = window.CodePlayground(playgroundContainer, {
      onRun: function (code) {
        // Auto-complete "build first program" task when any code is generated
        if (code && code.length > 50) {
          taskCards.setComplete('build-first', true);
        }
      },
      guidedTasks: challenges.map(function (c) {
        return {
          title: c.emoji + ' ' + c.name,
          description: c.desc,
          prompt: c.prompt
        };
      })
    });

    // =============================================
    // Section 3: Export Button
    // =============================================
    var exportContainer = document.getElementById('export-container');

    window.ExportButton(exportContainer, {
      label: 'Download My Program',
      getData: function () {
        var code = playground.getCode();
        if (!code) {
          return '<!-- No code generated yet! Go back and build something first. -->';
        }
        taskCards.setComplete('export-fav', true);
        return code;
      },
      filename: 'my-ai-program.html',
      format: 'html'
    });

    // =============================================
    // Task Sidebar
    // =============================================
    var taskSidebar = document.getElementById('task-sidebar');

    var taskCards = window.TaskCards(taskSidebar, [
      { id: 'build-first', title: 'Build your first program', description: 'Generate any program using the playground' },
      { id: 'modify-it', title: 'Try modifying it', description: 'Use "What to change?" to update your program' },
      { id: 'create-three', title: 'Create 3 different programs', description: 'Try at least 3 different challenges' },
      { id: 'export-fav', title: 'Export your favorite', description: 'Download one program as an HTML file' }
    ]);
  </script>

</body>
</html>
